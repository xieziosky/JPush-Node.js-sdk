<!DOCTYPE html>
<html>
<head>
  <title>jpush.js</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" type="text/css" href="assets/doxco.css" />
  <link rel="stylesheet" type="text/css" href="assets/github.css" />
</head>
<body>
<div id="container">
  <div id="background"></div>
  <ul class="sections">
    <li id="title">
      <div class="docs">
        <h1>jpush.js</h1>
      </div>
    </li>
  
    <li id="section-1">
      <div class="docs">
        
        <div class="pilwrap ">
          <a href="#section-1" class="pilcrow">&#182;</a>
        </div>
        <p>Example 1:</p>

<div class="highlight"><pre lang="js"> var jpushClient = JPush.build({appkey: "appkey", masterSecret: "masterSecret"});
 var body =  'Hi jpush nodejs sdk!';
 jpushClient.pushNotification(body, function (err, result){
     console.log(result);
   })
</pre></div>

<p>Example 2:</p>

<div class="highlight"><pre lang="js"> var jpushClient = JPush.build({appkey: "appkey", masterSecret: "masterSecret"});
 //对象格式文档
 //<a href='http://docs.jpush.cn/display/dev/Push-API-v3#Push-API-v3-notification'>http://docs.jpush.cn/display/dev/Push-API-v3#Push-API-v3-notification</a>
 var body = {};
 body.android = {};
 body.android.alert = 'Hello, JPush Node.js sdk !';
 body.android.title = "Node.js sdk";

 var jpushOpitons = {};
 jpushOpitons.options = {};
 jpushOpitons.options.sendno = sendno;

 jpushOpitons.audience = {
            "tag" : ["sdk"]
        };
 jpushClient.pushNotification(body, function (err, result){
     console.log(result);
   })
</pre></div>
      </div>
      
      <div class="code">
        <pre>JPush.prototype.pushNotification = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(body, options, callback)</span> {</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'undefined is not a valid object.'</span>)
    }

    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'function'</span>) &amp;&amp; !callback) {
        callback = options;
    }

    <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'object'</span> ? options : {};

    options.appkey = <span class="hljs-keyword">this</span>.appkey;
    options.masterSecret = <span class="hljs-keyword">this</span>.masterSecret;

    <span class="hljs-keyword">var</span> postBody = {};


    postBody.platform = options.platform || <span class="hljs-string">'all'</span>;

    postBody.audience = options.audience || <span class="hljs-string">'all'</span>;

    postBody.options = options.options || {};

    postBody.notification = {};

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'string'</span>){
        postBody.notification.alert = body;
    }<span class="hljs-keyword">else</span> {
        postBody.notification = body;
    }

    postJPushApi(postBody, options, callback);
}</pre>
      </div>
      
    </li>
  
    <li id="section-2">
      <div class="docs">
        
        <div class="pilwrap ">
          <a href="#section-2" class="pilcrow">&#182;</a>
        </div>
        <p>Example 1:</p>

<p><div class="highlight"><pre lang="js"> var jpushClient = JPush.build({appkey: "appkey", masterSecret: "masterSecret"});<br /> var body =  'Hi jpush nodejs sdk!';<br /> jpushClient.pushMessage(body, function (err, result){<br />     console.log(result);<br />   })<br /> </pre></div></p>

<p>Example 2:</p>

<p><div class="highlight"><pre lang="js"> var jpushClient = JPush.build({appkey: "appkey", masterSecret: "masterSecret"});<br /> //对象格式文档<br /> //<a href='http://docs.jpush.cn/display/dev/Push-API-v3#Push-API-v3-notification'>http://docs.jpush.cn/display/dev/Push-API-v3#Push-API-v3-notification</a><br /> var body = {};<br /> body.android = {};<br /> body.android.alert = 'Hello, JPush Node.js sdk !';<br /> body.android.title = "Node.js sdk";</p>

<p>var jpushOpitons = {};<br /> jpushOpitons.options = {};<br /> jpushOpitons.options.sendno = sendno;<br /> jpushOpitons.audience = {<br />            "tag" : ["sdk"]<br />        };<br /> jpushClient.pushMessage(body, function (err, result){<br />     console.log(result);<br />   })<br /> </pre></div></p>
      </div>
      
      <div class="code">
        <pre>JPush.prototype.pushMessage = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(body, options, callback)</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'undefined'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'undefined is not a valid object.'</span>)
    }

    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'function'</span>) &amp;&amp; !callback) {
        callback = options;
    }

    <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'object'</span> ? options : {};

    options.appkey = <span class="hljs-keyword">this</span>.appkey;
    options.masterSecret = <span class="hljs-keyword">this</span>.masterSecret;

    <span class="hljs-keyword">var</span> postBody = {};

    postBody.platform = options.platform || <span class="hljs-string">'all'</span>;

    postBody.audience = options.audience || <span class="hljs-string">'all'</span>;

    postBody.options = options.options || {};

    <span class="hljs-keyword">var</span> postBody = {};

    postBody.platform = options.platform || <span class="hljs-string">'all'</span>;

    postBody.audience = options.audience || <span class="hljs-string">'all'</span>;

    postBody.options = options.options || {};

    postBody.message = {};

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'string'</span>){
        postBody.message.msg_content = body;
    }<span class="hljs-keyword">else</span> {
        postBody.message = body;
    }



    postJPushApi(postBody, options, callback);


}</pre>
      </div>
      
    </li>
  
    <li id="section-3">
      <div class="docs">
        
        <div class="pilwrap ">
          <a href="#section-3" class="pilcrow">&#182;</a>
        </div>
        <p>创建一个JPush 远程调用实例<br /> <div class="highlight"><pre lang="js"> var jpushClient = JPush.build({appkey: "appkey", masterSecret: "masterSecret"});<br /> </pre></div></p>
      </div>
      
      <div class="code">
        <pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">build</span><span class="hljs-params">(options)</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JPush(options);
}


exports.build = build;

exports.postJPushApi = postJPushApi;</pre>
      </div>
      
    </li>
  
  </ul>
</div>
</body>
</html>
